<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contas a Receber - Manuela Metais</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div class="header">
        <div class="header-content">
            <div class="logo">
                <h1>ðŸ”„ MANUELA METAIS</h1>
                <p>Sistema de GestÃ£o de Coleta de Metais ReciclÃ¡veis</p>
            </div>
        </div>
    </div>

    <nav class="nav">
        <div class="nav-content">
            <a href="/">Dashboard</a>
            <a href="/clientes">Clientes</a>
            <a href="/fornecedores">Fornecedores</a>
            <a href="/funcionarios">FuncionÃ¡rios</a>
            <a href="/produtos">Produtos</a>
            <a href="/estoque">Estoque</a>
            <a href="/contas-receber" class="active">Contas a Receber</a>
            <a href="/contas-pagar">Contas a Pagar</a>
            <a href="/gastos">Gastos</a>
            <a href="/pedidos-compra">Pedidos de Compra</a>
        </div>
    </nav>

    <div class="container">
        <div class="card">
            <div class="card-header">
                <h2>Contas a Receber</h2>
                <div>
                    <button class="btn btn-success" onclick="openModal('venda')">+ Registrar Venda</button>
                    <button class="btn btn-warning" onclick="openModal('pagamento')">ðŸ’° Receber Pagamento/Adiantamento</button>
                </div>
            </div>

            <div class="alert alert-info" style="background: #e7f3ff; border-color: #b3d9ff; color: #004085;">
                <strong>ðŸ’¡ Como funciona:</strong><br>
                â€¢ <strong>Venda:</strong> Cria uma conta a receber e deixa o cliente <strong>negativado</strong> (saldo negativo)<br>
                â€¢ <strong>Pagamento/Adiantamento:</strong> Cliente paga e o saldo aumenta (pode ficar positivo = crÃ©dito)
            </div>

            <div class="table-container">
                <table id="contas-table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Data</th>
                            <th>Cliente</th>
                            <th>Tipo</th>
                            <th>DescriÃ§Ã£o</th>
                            <th>Valor</th>
                            <th>Status</th>
                            <th>AÃ§Ãµes</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>

        <div class="card">
            <div class="card-header">
                <h2>Saldos dos Clientes</h2>
            </div>
            <div id="saldos-container"></div>
        </div>
    </div>

    <!-- Modal -->
    <div id="modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modal-title">Nova TransaÃ§Ã£o</h3>
                <button class="close-modal" onclick="closeModal()">&times;</button>
            </div>
            <form id="conta-form">
                <input type="hidden" name="tipo" id="tipo-transacao">
                
                <div class="form-group">
                    <label>Cliente *</label>
                    <select class="form-control" name="cliente_id" id="cliente-select" required>
                        <option value="">Selecione um cliente</option>
                    </select>
                </div>

                <div class="form-group" id="saldo-atual-display"></div>

                <div class="form-row">
                    <div class="form-group">
                        <label>Valor (R$) *</label>
                        <input type="number" class="form-control" name="valor" step="0.01" required>
                    </div>
                    <div class="form-group">
                        <label>Data de Vencimento</label>
                        <input type="date" class="form-control" name="data_vencimento">
                    </div>
                </div>

                <div class="form-group">
                    <label>DescriÃ§Ã£o</label>
                    <textarea class="form-control" name="descricao" rows="3"></textarea>
                </div>

                <button type="submit" class="btn btn-primary">Salvar</button>
            </form>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/contas_receber.js') }}"></script>
</body>
</html>
